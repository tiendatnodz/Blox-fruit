-- ðŸŒ™ AutoFarm Blox Fruits (Bay trÃªn Ä‘áº§u quÃ¡i)
local _ENV = (getgenv or getrenv or getfenv)()
local Players = game:GetService("Players")
local lp = Players.LocalPlayer

-- Config
getgenv().AutoFarm = true
getgenv().FarmRange = 60
getgenv().AttackDelay = 0.15
getgenv().HeightAboveMob = 7  -- Ä‘á»™ cao bay trÃªn Ä‘áº§u quÃ¡i

-- Kiá»ƒm tra mob
local function IsMob(model)
    local hum = model:FindFirstChildOfClass("Humanoid")
    local root = model:FindFirstChild("HumanoidRootPart")
    return hum and root and hum.Health > 0
end

-- TÃ¬m mob gáº§n nháº¥t
local function NearestMob()
    if not lp.Character or not lp.Character:FindFirstChild("HumanoidRootPart") then return end
    local pos = lp.Character.HumanoidRootPart.Position
    local nearest, dist = nil, math.huge
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("Model") and IsMob(v) then
            local root = v:FindFirstChild("HumanoidRootPart")
            if root then
                local d = (root.Position - pos).Magnitude
                if d < dist and d <= getgenv().FarmRange then
                    nearest, dist = v, d
                end
            end
        end
    end
    return nearest
end

-- Cáº§m vÅ© khÃ­
local function EquipTool()
    local char = lp.Character
    if not char then return end
    local bp = lp:FindFirstChild("Backpack")
    if bp then
        for _, t in pairs(bp:GetChildren()) do
            if t:IsA("Tool") then
                t.Parent = char
                return t
            end
        end
    end
    return char:FindFirstChildOfClass("Tool")
end

-- Loop AutoFarm
task.spawn(function()
    while task.wait() do
        if getgenv().AutoFarm then
            local mob = NearestMob()
            if mob and lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
                local root = mob:FindFirstChild("HumanoidRootPart")
                if root then
                    -- Bay lÃªn trÃªn Ä‘áº§u mob
                    lp.Character.HumanoidRootPart.CFrame = root.CFrame * CFrame.new(0, getgenv().HeightAboveMob, 0)

                    -- Equip tool vÃ  Ä‘Ã¡nh
                    local tool = EquipTool()
                    if tool then
                        tool:Activate()
                    end
                    task.wait(getgenv().AttackDelay)
                end
            end
        end
    end
end)

print("ðŸŒ™ AutoFarm (Bay trÃªn Ä‘áº§u quÃ¡i) Loaded | GÃµ: getgenv().AutoFarm = true/false Ä‘á»ƒ báº­t hoáº·c táº¯t")
